{"pageProps":{"content":"\n              <a id=\"Oracle配置LogMiner\" style='display: block; height: 35px;'></a>\n              <h1>\n                Oracle配置LogMiner\n              </h1>\n            <p>注意：</p>\n<p>1、某个Oracle数据源能同时运行的任务数量取决于该Oracle的内存大小</p>\n<p>2、若数据量太大导致日志组频繁切换需要增加日志组数量，增大单个日志组存储大小</p>\n\n              <a id=\"一、Oracle 10g(单机版)\" style='display: block; height: 35px;'></a>\n              <h2>\n                一、Oracle 10g(单机版)\n              </h2>\n            \n              <a id=\"1、查询Oracle版本信息，这里配置的是<code>Oracle 10g</code>\" style='display: block; height: 35px;'></a>\n              <h3>\n                1、查询Oracle版本信息，这里配置的是<code>Oracle 10g</code>\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查看oracle版本</span>\n<span class=\"hljs-keyword\">select</span> *\n<span class=\"hljs-keyword\">from</span> v$<span class=\"hljs-keyword\">version</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner1.png\" alt=\"image\"></p>\n<p>本章Oracle的版本如上图所示。</p>\n\n              <a id=\"2、通过命令行方式登录Oracle，查看是否开启日志归档\" style='display: block; height: 35px;'></a>\n              <h3>\n                2、通过命令行方式登录Oracle，查看是否开启日志归档\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查询数据库归档模式</span>\narchive\n<span class=\"hljs-built_in\">log</span> <span class=\"hljs-built_in\">list</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner2.png\" alt=\"image\"></p>\n<p>图中显示<code>No Archive Mode</code>表示未开启日志归档。</p>\n\n              <a id=\"3、开启日志归档，开启日志归档需要重启数据库，请注意\" style='display: block; height: 35px;'></a>\n              <h3>\n                3、开启日志归档，开启日志归档需要重启数据库，请注意\n              </h3>\n            \n              <a id=\"a、配置归档日志保存的路径\" style='display: block; height: 35px;'></a>\n              <h4>\n                a、配置归档日志保存的路径\n              </h4>\n            <p>根据自身环境配置归档日志保存路径，需要提前创建相应目录及赋予相应访问权限</p>\n<pre><code class=\"language-shell\"><span class=\"hljs-comment\"># 创建归档日志保存目录</span>\n<span class=\"hljs-built_in\">mkdir</span> -p /data/oracle/archivelog\n\n<span class=\"hljs-comment\"># 进入Oracle目录</span>\n<span class=\"hljs-built_in\">cd</span> <span class=\"hljs-variable\">$ORACLE_HOME</span>\n\n<span class=\"hljs-comment\"># 查看Oracle权限组，本章权限组如下图所示</span>\n<span class=\"hljs-built_in\">ls</span> -l\n\n<span class=\"hljs-comment\"># 对归档日志保存目录赋予相应权限</span>\n<span class=\"hljs-built_in\">chown</span> -R 下图中的用户名:下图中的组名 /data/oracle/\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner3.png\" alt=\"image\"></p>\n<pre><code class=\"language-sql\">--配置归档日志保存的路径\nalter<span class=\"hljs-built_in\">\nsystem </span><span class=\"hljs-built_in\">set</span> <span class=\"hljs-attribute\">log_archive_dest_1</span>=<span class=\"hljs-string\">&#x27;location=/data/oracle/archivelog&#x27;</span> <span class=\"hljs-attribute\">scope</span>=spfile;\n</code></pre>\n\n              <a id=\"b、关闭数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                b、关闭数据库\n              </h4>\n            <pre><code class=\"language-sql\">shutdown\nimmediate<span class=\"hljs-comment\">;</span>\nstartup\nmount<span class=\"hljs-comment\">;</span>\n</code></pre>\n\n              <a id=\"c、开启日志归档\" style='display: block; height: 35px;'></a>\n              <h4>\n                c、开启日志归档\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启日志归档</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> archivelog;\n</code></pre>\n\n              <a id=\"d、开启扩充日志\" style='display: block; height: 35px;'></a>\n              <h4>\n                d、开启扩充日志\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启扩充日志</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> supplemental <span class=\"hljs-keyword\">log</span> data (<span class=\"hljs-keyword\">all</span>) <span class=\"hljs-keyword\">columns</span>; \n</code></pre>\n\n              <a id=\"e、开启数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                e、开启数据库\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">open</span>;\n</code></pre>\n<p>再次查询数据库归档模式，<code>Archive Mode</code>表示已开启归档模式，<code>Archive destination</code>表示归档日志储存路径。</p>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner4.png\" alt=\"image\"></p>\n\n              <a id=\"4、配置日志组\" style='display: block; height: 35px;'></a>\n              <h3>\n                4、配置日志组\n              </h3>\n            \n              <a id=\"a、查询默认日志组信息\" style='display: block; height: 35px;'></a>\n              <h4>\n                a、查询默认日志组信息\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> v$<span class=\"hljs-built_in\">log</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner5.png\" alt=\"image\"></p>\n<p>如上图所示，日志组的默认数量为2组，大小为4194304/1024/1024 = 4MB，这意味着日志大小每达到4MB就会进行日志组的切换，切换太过频繁会导致查询出错，因此需要增加日志组数量及大小。</p>\n\n              <a id=\"b、查询日志组储存路径\" style='display: block; height: 35px;'></a>\n              <h4>\n                b、查询日志组储存路径\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\nFROM v$logfile<span class=\"hljs-comment\">;</span>\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner6.png\" alt=\"image\"></p>\n<p>如上图所示，默认路径为<code>/usr/lib/oracle/xe/app/oracle/flash_recovery_area/XE/onlinelog/</code>。</p>\n\n              <a id=\"c、新增日志组与删除原有日志组\" style='display: block; height: 35px;'></a>\n              <h4>\n                c、新增日志组与删除原有日志组\n              </h4>\n            <p>请与DBA联系，决定是否可以删除原有日志组。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-comment\">--增加两组日志组</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> logfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">3</span> (<span class=\"hljs-string\">&#x27;/usr/lib/oracle/xe/app/oracle/flash_recovery_area/XE/onlinelog/redo3.log&#x27;</span>) size <span class=\"hljs-number\">200</span>m;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> logfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">4</span> (<span class=\"hljs-string\">&#x27;/usr/lib/oracle/xe/app/oracle/flash_recovery_area/XE/onlinelog/redo4.log&#x27;</span>) size <span class=\"hljs-number\">200</span>m;\n</code></pre>\n<pre><code class=\"language-sql\"><span class=\"hljs-comment\">--删除原有两组日志组，并继续新增两组日志组</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">system</span> <span class=\"hljs-keyword\">checkpoint</span>;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">system</span> switch logfile;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">drop</span>\nlogfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">drop</span>\nlogfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">2</span>;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> logfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">1</span> (<span class=\"hljs-string\">&#x27;/usr/lib/oracle/xe/app/oracle/flash_recovery_area/XE/onlinelog/redo1.log&#x27;</span>) size <span class=\"hljs-number\">200</span>m;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> logfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">2</span> (<span class=\"hljs-string\">&#x27;/usr/lib/oracle/xe/app/oracle/flash_recovery_area/XE/onlinelog/redo2.log&#x27;</span>) size <span class=\"hljs-number\">200</span>m;\n</code></pre>\n\n              <a id=\"d、查询创建的日志组\" style='display: block; height: 35px;'></a>\n              <h4>\n                d、查询创建的日志组\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> v$<span class=\"hljs-built_in\">log</span>;\n<span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> v$logfile;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner7.png\" alt=\"image\"></p>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner8.png\" alt=\"image\"></p>\n\n              <a id=\"5、检查是否安装LogMiner工具\" style='display: block; height: 35px;'></a>\n              <h3>\n                5、检查是否安装LogMiner工具\n              </h3>\n            <p>Oracle10g默认已安装LogMiner工具包，通过以下命令查询：</p>\n<pre><code class=\"language-sql\">desc DBMS_LOGMNR<span class=\"hljs-comment\">;</span>\ndesc DBMS_LOGMNR_D<span class=\"hljs-comment\">;</span>\n</code></pre>\n<p>若无信息打印，则执行下列SQL初始化LogMiner工具包：</p>\n<pre><code class=\"language-sql\">@\n<span class=\"hljs-variable\">$ORACLE_HOME</span>\n<span class=\"hljs-regexp\">/rdbms/</span>admin/dbmslm.sql;\n@\n<span class=\"hljs-variable\">$ORACLE_HOME</span>\n<span class=\"hljs-regexp\">/rdbms/</span>admin/dbmslmd.sql;\n</code></pre>\n\n              <a id=\"6、创建LogMiner角色并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                6、创建LogMiner角色并赋权\n              </h3>\n            <p>其中<code>roma_logminer_privs</code>为角色名称，可根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span> <span class=\"hljs-keyword\">role</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span>\n<span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">session</span>,execute_catalog_role,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">transaction</span>,flashback <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">lock</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">dictionary</span> <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_COL$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_OBJ$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_USER$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_UID$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> select_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n</code></pre>\n\n              <a id=\"7、创建LogMiner用户并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                7、创建LogMiner用户并赋权\n              </h3>\n            <p>其中<code>roma_logminer</code>为用户名，<code>password</code>为密码，请根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer identified <span class=\"hljs-keyword\">by</span> <span class=\"hljs-keyword\">password</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">tablespace</span> users;\n<span class=\"hljs-keyword\">grant</span> roma_logminer_privs <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">grant</span> execute_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer quota unlimited <span class=\"hljs-keyword\">on</span> users;\n</code></pre>\n\n              <a id=\"8、验证用户权限\" style='display: block; height: 35px;'></a>\n              <h3>\n                8、验证用户权限\n              </h3>\n            <p>以创建的LogMiner用户登录Oracle数据库，执行以下SQL查询权限，结果如图所示：</p>\n<pre><code class=\"language-sql\"> <span class=\"hljs-keyword\">SELECT</span> *\n <span class=\"hljs-keyword\">FROM</span> USER_ROLE_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner9.png\" alt=\"image\"></p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> SESSION_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner10.png\" alt=\"image\"></p>\n<p>至此，Oracle 10g数据库LogMiner实时采集配置完毕。</p>\n\n              <a id=\"二、Oracle 11g(单机版)\" style='display: block; height: 35px;'></a>\n              <h2>\n                二、Oracle 11g(单机版)\n              </h2>\n            \n              <a id=\"1、查询Oracle版本信息，这里配置的是<code>Oracle 11g</code>\" style='display: block; height: 35px;'></a>\n              <h3>\n                1、查询Oracle版本信息，这里配置的是<code>Oracle 11g</code>\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查看oracle版本</span>\n<span class=\"hljs-keyword\">select</span> *\n<span class=\"hljs-keyword\">from</span> v$<span class=\"hljs-keyword\">version</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner11.png\" alt=\"image\"></p>\n<p>本章Oracle的版本如上图所示。</p>\n\n              <a id=\"2、通过命令行方式登录Oracle，查看是否开启日志归档\" style='display: block; height: 35px;'></a>\n              <h3>\n                2、通过命令行方式登录Oracle，查看是否开启日志归档\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查询数据库归档模式</span>\narchive\n<span class=\"hljs-built_in\">log</span> <span class=\"hljs-built_in\">list</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner12.png\" alt=\"image\"></p>\n<p>图中显示<code>No Archive Mode</code>表示未开启日志归档。</p>\n\n              <a id=\"3、开启日志归档，开启日志归档需要重启数据库，请注意\" style='display: block; height: 35px;'></a>\n              <h3>\n                3、开启日志归档，开启日志归档需要重启数据库，请注意\n              </h3>\n            \n              <a id=\"a、配置归档日志保存的路径\" style='display: block; height: 35px;'></a>\n              <h4>\n                a、配置归档日志保存的路径\n              </h4>\n            <p>根据自身环境配置归档日志保存路径，需要提前创建相应目录及赋予相应访问权限</p>\n<pre><code class=\"language-sql\"> alter<span class=\"hljs-built_in\">\nsystem </span><span class=\"hljs-built_in\">set</span> <span class=\"hljs-attribute\">log_archive_dest_1</span>=<span class=\"hljs-string\">&#x27;location=/data/oracle/archivelog&#x27;</span> <span class=\"hljs-attribute\">scope</span>=spfile;\n</code></pre>\n\n              <a id=\"b、关闭数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                b、关闭数据库\n              </h4>\n            <pre><code class=\"language-sql\">shutdown\nimmediate<span class=\"hljs-comment\">;</span>\nstartup\nmount<span class=\"hljs-comment\">;</span>\n</code></pre>\n\n              <a id=\"c、开启日志归档\" style='display: block; height: 35px;'></a>\n              <h4>\n                c、开启日志归档\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启日志归档</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> archivelog;\n</code></pre>\n\n              <a id=\"d、开启扩充日志\" style='display: block; height: 35px;'></a>\n              <h4>\n                d、开启扩充日志\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启扩充日志</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> supplemental <span class=\"hljs-keyword\">log</span> data (<span class=\"hljs-keyword\">all</span>) <span class=\"hljs-keyword\">columns</span>; \n</code></pre>\n\n              <a id=\"e、开启数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                e、开启数据库\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">open</span>;\n</code></pre>\n<p>再次查询数据库归档模式，<code>Archive Mode</code>表示已开启归档模式，<code>Archive destination</code>表示归档日志储存路径。\n<img src=\"../../../website/src/images/doc/LogMiner/LogMiner13.png\" alt=\"image\"></p>\n\n              <a id=\"4、检查是否安装LogMiner工具\" style='display: block; height: 35px;'></a>\n              <h3>\n                4、检查是否安装LogMiner工具\n              </h3>\n            <p>Oracle11g默认已安装LogMiner工具包，通过以下命令查询：</p>\n<pre><code class=\"language-sql\">desc DBMS_LOGMNR<span class=\"hljs-comment\">;</span>\ndesc DBMS_LOGMNR_D<span class=\"hljs-comment\">;</span>\n</code></pre>\n<p>若无信息打印，则执行下列SQL初始化LogMiner工具包：</p>\n<pre><code class=\"language-sql\">@\n<span class=\"hljs-variable\">$ORACLE_HOME</span>\n<span class=\"hljs-regexp\">/rdbms/</span>admin/dbmslm.sql;\n@\n<span class=\"hljs-variable\">$ORACLE_HOME</span>\n<span class=\"hljs-regexp\">/rdbms/</span>admin/dbmslmd.sql;\n</code></pre>\n\n              <a id=\"5、创建LogMiner角色并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                5、创建LogMiner角色并赋权\n              </h3>\n            <p>其中<code>roma_logminer_privs</code>为角色名称，可根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span> <span class=\"hljs-keyword\">role</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span>\n<span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">session</span>,execute_catalog_role,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">transaction</span>,flashback <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">lock</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">dictionary</span> <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_COL$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_OBJ$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_USER$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_UID$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> select_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n</code></pre>\n\n              <a id=\"6、创建LogMiner用户并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                6、创建LogMiner用户并赋权\n              </h3>\n            <p>其中<code>roma_logminer</code>为用户名，<code>password</code>为密码，请根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer identified <span class=\"hljs-keyword\">by</span> <span class=\"hljs-keyword\">password</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">tablespace</span> users;\n<span class=\"hljs-keyword\">grant</span> roma_logminer_privs <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">grant</span> execute_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer quota unlimited <span class=\"hljs-keyword\">on</span> users;\n</code></pre>\n\n              <a id=\"7、验证用户权限\" style='display: block; height: 35px;'></a>\n              <h3>\n                7、验证用户权限\n              </h3>\n            <p>以创建的LogMiner用户登录Oracle数据库，执行以下SQL查询权限，结果如图所示：</p>\n<pre><code class=\"language-sql\"> <span class=\"hljs-keyword\">SELECT</span> *\n <span class=\"hljs-keyword\">FROM</span> USER_ROLE_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner14.png\" alt=\"image\"></p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> SESSION_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner15.png\" alt=\"image\"></p>\n<p>至此，Oracle 11g数据库LogMiner实时采集配置完毕。</p>\n\n              <a id=\"三、Oracle 12c(单机版非CBD)\" style='display: block; height: 35px;'></a>\n              <h2>\n                三、Oracle 12c(单机版非CBD)\n              </h2>\n            \n              <a id=\"1、查询Oracle版本信息，这里配置的是<code>Oracle 12c</code>\" style='display: block; height: 35px;'></a>\n              <h3>\n                1、查询Oracle版本信息，这里配置的是<code>Oracle 12c</code>\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查看oracle版本</span>\n<span class=\"hljs-keyword\">select</span> BANNER\n<span class=\"hljs-keyword\">from</span> v$<span class=\"hljs-keyword\">version</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner16.png\" alt=\"image\"></p>\n<p>本章Oracle的版本如上图所示。</p>\n\n              <a id=\"2、通过命令行方式登录Oracle，查看是否开启日志归档\" style='display: block; height: 35px;'></a>\n              <h3>\n                2、通过命令行方式登录Oracle，查看是否开启日志归档\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查询数据库归档模式</span>\narchive\n<span class=\"hljs-built_in\">log</span> <span class=\"hljs-built_in\">list</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner17.png\" alt=\"image\"></p>\n<p>图中显示<code>No Archive Mode</code>表示未开启日志归档。</p>\n\n              <a id=\"3、开启日志归档，开启日志归档需要重启数据库，请注意\" style='display: block; height: 35px;'></a>\n              <h3>\n                3、开启日志归档，开启日志归档需要重启数据库，请注意\n              </h3>\n            \n              <a id=\"a、配置归档日志保存的路径\" style='display: block; height: 35px;'></a>\n              <h4>\n                a、配置归档日志保存的路径\n              </h4>\n            <p>根据自身环境配置归档日志保存路径，需要提前创建相应目录及赋予相应访问权限</p>\n<pre><code class=\"language-sql\"> alter<span class=\"hljs-built_in\">\nsystem </span><span class=\"hljs-built_in\">set</span> <span class=\"hljs-attribute\">log_archive_dest_1</span>=<span class=\"hljs-string\">&#x27;location=/data/oracle/archivelog&#x27;</span> <span class=\"hljs-attribute\">scope</span>=spfile;\n</code></pre>\n\n              <a id=\"b、关闭数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                b、关闭数据库\n              </h4>\n            <pre><code class=\"language-sql\">shutdown\nimmediate<span class=\"hljs-comment\">;</span>\nstartup\nmount<span class=\"hljs-comment\">;</span>\n</code></pre>\n\n              <a id=\"c、开启日志归档\" style='display: block; height: 35px;'></a>\n              <h4>\n                c、开启日志归档\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启日志归档</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> archivelog;\n</code></pre>\n\n              <a id=\"d、开启扩充日志\" style='display: block; height: 35px;'></a>\n              <h4>\n                d、开启扩充日志\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启扩充日志</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> supplemental <span class=\"hljs-keyword\">log</span> data (<span class=\"hljs-keyword\">all</span>) <span class=\"hljs-keyword\">columns</span>; \n</code></pre>\n\n              <a id=\"e、开启数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                e、开启数据库\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">open</span>;\n</code></pre>\n<p>再次查询数据库归档模式，<code>Archive Mode</code>表示已开启归档模式，<code>Archive destination</code>表示归档日志储存路径。\n<img src=\"../../../website/src/images/doc/LogMiner/LogMiner18.png\" alt=\"image\"></p>\n\n              <a id=\"4、创建LogMiner角色并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                4、创建LogMiner角色并赋权\n              </h3>\n            <p>其中<code>roma_logminer_privs</code>为角色名称，可根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span> <span class=\"hljs-keyword\">role</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span>\n<span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">session</span>,execute_catalog_role,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">transaction</span>,flashback <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">lock</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,logmining,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">dictionary</span> <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_COL$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_OBJ$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_USER$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_UID$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> select_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> LOGMINING <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n</code></pre>\n\n              <a id=\"5、创建LogMiner用户并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                5、创建LogMiner用户并赋权\n              </h3>\n            <p>其中<code>roma_logminer</code>为用户名，<code>password</code>为密码，请根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer identified <span class=\"hljs-keyword\">by</span> <span class=\"hljs-keyword\">password</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">tablespace</span> users;\n<span class=\"hljs-keyword\">grant</span> roma_logminer_privs <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">grant</span> execute_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer quota unlimited <span class=\"hljs-keyword\">on</span> users;\n</code></pre>\n\n              <a id=\"6、验证用户权限\" style='display: block; height: 35px;'></a>\n              <h3>\n                6、验证用户权限\n              </h3>\n            <p>以创建的LogMiner用户登录Oracle数据库，执行以下SQL查询权限，结果如图所示：</p>\n<pre><code class=\"language-sql\"> <span class=\"hljs-keyword\">SELECT</span> *\n <span class=\"hljs-keyword\">FROM</span> USER_ROLE_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner19.png\" alt=\"image\"></p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> SESSION_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner20.png\" alt=\"image\"></p>\n<p>至此，Oracle 12c数据库LogMiner实时采集配置完毕。</p>\n","tree":[{"label":"ChunJun通用配置详解","category":"file"},{"label":"快速开始","category":"file"},{"label":"ChunJun拓展数据格式","children":[{"label":"protobuf-x","path":"protobuf-x","category":"file"}],"category":"dir"},{"label":"ChunJun连接器","children":[{"label":"binlog","category":"dir","children":[{"label":"binlog-source","path":"binlog-source","category":"file"}]},{"label":"clickhouse","category":"dir","children":[{"label":"clickhouse-lookup","path":"clickhouse-lookup","category":"file"},{"label":"clickhouse-sink","path":"clickhouse-sink","category":"file"},{"label":"clickhouse-source","path":"clickhouse-source","category":"file"}]},{"label":"db2","category":"dir","children":[{"label":"db2-lookup","path":"db2-lookup","category":"file"},{"label":"db2-sink","path":"db2-sink","category":"file"},{"label":"db2-source","path":"db2-source","category":"file"}]},{"label":"dm","category":"dir","children":[{"label":"dm-sink","path":"dm-sink","category":"file"},{"label":"dm-source","path":"dm-source","category":"file"}]},{"label":"doris","category":"dir","children":[{"label":"dorisbatch-sink","path":"dorisbatch-sink","category":"file"}]},{"label":"elasticsearch","category":"dir","children":[{"label":"es7-lookup","path":"es7-lookup","category":"file"},{"label":"es7-sink","path":"es7-sink","category":"file"},{"label":"es7-source","path":"es7-source","category":"file"}]},{"label":"gbase","category":"dir","children":[{"label":"gbase-lookup","path":"gbase-lookup","category":"file"},{"label":"gbase-sink","path":"gbase-sink","category":"file"},{"label":"gbase-source","path":"gbase-source","category":"file"}]},{"label":"greenplum","category":"dir","children":[{"label":"greenplum-sink","path":"greenplum-sink","category":"file"},{"label":"greenplum-source","path":"greenplum-source","category":"file"}]},{"label":"hbase","category":"dir","children":[{"label":"hbase-lookup","path":"hbase-lookup","category":"file"},{"label":"hbase-sink","path":"hbase-sink","category":"file"},{"label":"hbase-source","path":"hbase-source","category":"file"}]},{"label":"hdfs","category":"dir","children":[{"label":"hdfs-sink","path":"hdfs-sink","category":"file"},{"label":"hdfs-source","path":"hdfs-source","category":"file"}]},{"label":"hive","category":"dir","children":[{"label":"hive-lookup","path":"hive-lookup","category":"file"},{"label":"hive-sink","path":"hive-sink","category":"file"}]},{"label":"influxdb","category":"dir","children":[{"label":"influxdb-sink","path":"influxdb-sink","category":"file"},{"label":"influxdb-source","path":"influxdb-source","category":"file"}]},{"label":"kafka","category":"dir","children":[{"label":"kafka-sink","path":"kafka-sink","category":"file"},{"label":"kafka-source","path":"kafka-source","category":"file"}]},{"label":"kingbase","category":"dir","children":[{"label":"kingbase-sink","path":"kingbase-sink","category":"file"},{"label":"kingbase-source","path":"kingbase-source","category":"file"}]},{"label":"kudu","category":"dir","children":[{"label":"kudu-lookup","path":"kudu-lookup","category":"file"},{"label":"kudu-sink","path":"kudu-sink","category":"file"},{"label":"kudu-source","path":"kudu-source","category":"file"}]},{"label":"logminer","category":"dir","children":[{"label":"LogMiner-source","path":"LogMiner-source","category":"file"},{"label":"LogMiner原理","path":"LogMiner原理","category":"file"},{"label":"LogMiner配置","path":"LogMiner配置","category":"file"}]},{"label":"mongodb","category":"dir","children":[{"label":"mongodb-lookup","path":"mongodb-lookup","category":"file"},{"label":"mongodb-sink","path":"mongodb-sink","category":"file"},{"label":"mongodb-source","path":"mongodb-source","category":"file"}]},{"label":"mysql","category":"dir","children":[{"label":"mysql-lookup","path":"mysql-lookup","category":"file"},{"label":"mysql-sink","path":"mysql-sink","category":"file"},{"label":"mysql-source","path":"mysql-source","category":"file"}]},{"label":"oracle","category":"dir","children":[{"label":"oracle-lookup","path":"oracle-lookup","category":"file"},{"label":"oracle-sink","path":"oracle-sink","category":"file"},{"label":"oracle-source","path":"oracle-source","category":"file"}]},{"label":"pgwal","category":"dir","children":[{"label":"Postgres-CDC","path":"Postgres-CDC","category":"file"}]},{"label":"postgresql","category":"dir","children":[{"label":"postgres-lookup","path":"postgres-lookup","category":"file"},{"label":"postgres-sink","path":"postgres-sink","category":"file"},{"label":"postgres-source","path":"postgres-source","category":"file"}]},{"label":"rocketmq","category":"dir","children":[{"label":"rocketmq-source","path":"rocketmq-source","category":"file"}]},{"label":"saphana","category":"dir","children":[{"label":"saphana-sink","path":"saphana-sink","category":"file"},{"label":"saphana-source","path":"saphana-source","category":"file"}]},{"label":"sqlserver","category":"dir","children":[{"label":"sqlserver-lookup","path":"sqlserver-lookup","category":"file"},{"label":"sqlserver-sink","path":"sqlserver-sink","category":"file"},{"label":"sqlserver-source","path":"sqlserver-source","category":"file"}]},{"label":"sqlservercdc","category":"dir","children":[{"label":"SqlServer CDC实时采集原理","path":"SqlServer CDC实时采集原理","category":"file"},{"label":"SqlServer配置CDC","path":"SqlServer配置CDC","category":"file"},{"label":"SqlserverCDC-source","path":"SqlserverCDC-source","category":"file"}]}],"category":"dir"},{"label":"开发者指南","children":[{"label":"如何提交一个优秀的PR","path":"如何提交一个优秀的PR","category":"file"},{"label":"如何自定义插件","path":"如何自定义插件","category":"file"}],"category":"dir"},{"label":"拓展功能","children":[{"label":"增量同步介绍","path":"增量同步介绍","category":"file"},{"label":"断点续传介绍","path":"断点续传介绍","category":"file"},{"label":"脏数据插件设计","path":"脏数据插件设计","category":"file"}],"category":"dir"}],"toc":[{"text":"Oracle配置LogMiner","level":1,"id":"18e36fc6-1763-4165-a0e0-557d4dbb4a39"},{"text":"一、Oracle 10g(单机版)","level":2,"id":"cc664e3a-f8af-472d-ac37-82c921e2ee18"},{"text":"1、查询Oracle版本信息，这里配置的是<code>Oracle 10g</code>","level":3,"id":"78e83c0a-c723-4b2b-848b-52c7470a52c6"},{"text":"2、通过命令行方式登录Oracle，查看是否开启日志归档","level":3,"id":"08084bdf-5858-4d9a-a10a-ab37df5e20e2"},{"text":"3、开启日志归档，开启日志归档需要重启数据库，请注意","level":3,"id":"01c35af4-b469-4862-8e91-288eb0ad45c7"},{"text":"a、配置归档日志保存的路径","level":4,"id":"ff25b90a-dc89-4cf3-a25e-43edbcd15d5b"},{"text":"b、关闭数据库","level":4,"id":"12cd315f-7fa2-434e-9f83-4b291c116076"},{"text":"c、开启日志归档","level":4,"id":"72f76ad3-6110-4377-82f6-07cd3277893e"},{"text":"d、开启扩充日志","level":4,"id":"64212885-710e-44c6-ad0d-b1855cf1b1cc"},{"text":"e、开启数据库","level":4,"id":"a89c120a-ad36-4cc2-bce2-2d5acb98d23b"},{"text":"4、配置日志组","level":3,"id":"a710b486-1586-423d-8614-58834567f413"},{"text":"a、查询默认日志组信息","level":4,"id":"df3c99b1-6570-43fe-b84e-5abad11942e6"},{"text":"b、查询日志组储存路径","level":4,"id":"592124d1-4aeb-442a-bbf1-fcabbebbd9dd"},{"text":"c、新增日志组与删除原有日志组","level":4,"id":"94bfcdf7-c861-44dc-aff5-8d0d857a364c"},{"text":"d、查询创建的日志组","level":4,"id":"0dbfd78b-e2db-499a-b391-0567c31c7d0d"},{"text":"5、检查是否安装LogMiner工具","level":3,"id":"8f14f55b-c414-4ee5-a85e-13131167f846"},{"text":"6、创建LogMiner角色并赋权","level":3,"id":"ccae86cf-14fa-4e5a-b606-535aa7a3d1bf"},{"text":"7、创建LogMiner用户并赋权","level":3,"id":"80681da4-3312-48cb-bb14-fc7ac9b3e998"},{"text":"8、验证用户权限","level":3,"id":"922ee64a-92cd-4399-b498-1adac80bdebc"},{"text":"二、Oracle 11g(单机版)","level":2,"id":"da83f9f6-7792-464b-81b5-c854d75a9343"},{"text":"1、查询Oracle版本信息，这里配置的是<code>Oracle 11g</code>","level":3,"id":"e441e9d6-7446-4940-9bf3-3699e048755a"},{"text":"2、通过命令行方式登录Oracle，查看是否开启日志归档","level":3,"id":"80995f98-47f0-49ce-a3fb-ed821df790d8"},{"text":"3、开启日志归档，开启日志归档需要重启数据库，请注意","level":3,"id":"a5804c05-f9cb-41fa-a54e-ce536db586dc"},{"text":"a、配置归档日志保存的路径","level":4,"id":"c6c7f59b-0646-4dbe-a3d7-91bc7a284c67"},{"text":"b、关闭数据库","level":4,"id":"b7c06e79-74a8-4100-a7e4-7de101715d28"},{"text":"c、开启日志归档","level":4,"id":"917f4445-0c5c-4c46-8dbe-bb1f565e3847"},{"text":"d、开启扩充日志","level":4,"id":"69590cc6-98e2-4d6e-90ad-ba18938be2a9"},{"text":"e、开启数据库","level":4,"id":"b50c3ac5-e0cb-4897-99b0-a0a957c98f4c"},{"text":"4、检查是否安装LogMiner工具","level":3,"id":"f0d941c3-74dd-4fbf-8603-121226c2da06"},{"text":"5、创建LogMiner角色并赋权","level":3,"id":"aa8b2cc8-2ef6-4cd5-ae3d-23a76fb3b1ef"},{"text":"6、创建LogMiner用户并赋权","level":3,"id":"e82c676d-6e3e-49ff-b3e2-c09fb79ab7e2"},{"text":"7、验证用户权限","level":3,"id":"59a2cfc3-52c1-43b5-ae88-3a13409303d5"},{"text":"三、Oracle 12c(单机版非CBD)","level":2,"id":"cd4c4365-38a3-40e4-90ac-2c20100b1a5b"},{"text":"1、查询Oracle版本信息，这里配置的是<code>Oracle 12c</code>","level":3,"id":"9bba5865-6fed-4254-aa31-361d46fcc093"},{"text":"2、通过命令行方式登录Oracle，查看是否开启日志归档","level":3,"id":"f3fe19b9-ce53-4a1d-abd0-994fc11f811a"},{"text":"3、开启日志归档，开启日志归档需要重启数据库，请注意","level":3,"id":"4ad416f6-c37a-43d4-b027-da5dc975c11c"},{"text":"a、配置归档日志保存的路径","level":4,"id":"8978040b-ff2c-46a4-ade8-259d4b63f1f1"},{"text":"b、关闭数据库","level":4,"id":"02fbb045-5f51-43ee-bead-21292496c345"},{"text":"c、开启日志归档","level":4,"id":"198fc5eb-897f-4024-bff8-58cd166fb4b0"},{"text":"d、开启扩充日志","level":4,"id":"2f31f4da-5dd4-4e57-a02a-95c601a76f87"},{"text":"e、开启数据库","level":4,"id":"076046a7-a88d-46dd-93f6-844bc442ca8e"},{"text":"4、创建LogMiner角色并赋权","level":3,"id":"ee340f6e-7ccf-4487-94cc-59fc8bef74ce"},{"text":"5、创建LogMiner用户并赋权","level":3,"id":"0f55276b-5609-4145-a1c1-bb9c816bc5ad"},{"text":"6、验证用户权限","level":3,"id":"6b20f23d-84f3-4ad9-9f86-130256504769"}]},"__N_SSG":true}